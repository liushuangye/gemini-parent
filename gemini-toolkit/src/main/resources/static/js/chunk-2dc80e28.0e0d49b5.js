(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dc80e28"],{"493d":function(t,e,a){},a6fe:function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"g",(function(){return o})),a.d(e,"l",(function(){return s})),a.d(e,"m",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"a",(function(){return m})),a.d(e,"d",(function(){return p})),a.d(e,"k",(function(){return f})),a.d(e,"j",(function(){return h})),a.d(e,"b",(function(){return b}));var n=a("b775");function i(t){return Object(n["a"])({url:"/devops/getByPage",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/devops/getById?id="+t,method:"get"})}function s(t){return Object(n["a"])({url:"/devops/importTemplate",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/devops/updateTemplate",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/devops/task/execStep",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/devops/deleteToolkitById?id="+t,method:"delete"})}function u(){return Object(n["a"])({url:"/devops/getAllDevops",method:"get"})}function d(t){return Object(n["a"])({url:"/devops/task/getByPage",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/devops/task/createTask",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/devops/task/execRollback",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/devops/task/getTaskById?id="+t,method:"get"})}function h(t){return Object(n["a"])({url:"/devops/log/details?id="+t,method:"get"})}function b(t){return Object(n["a"])({url:"/devops/task/deleteTask?id="+t,method:"delete"})}},cf46:function(t,e,a){"use strict";a("493d")},f605:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"usernamage"},[a("router-view"),a("div",{staticClass:"usernamage-wrap"},[a("div",{staticClass:"search"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:t.$t("devopstools.taskName")}},[a("el-input",{staticClass:"inputWidth",attrs:{size:"mini"},model:{value:t.taskForm.templateName,callback:function(e){t.$set(t.taskForm,"templateName","string"===typeof e?e.trim():e)},expression:"taskForm.templateName"}})],1),a("el-form-item",{attrs:{label:t.$t("devopstools.createTime")}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticClass:"inputWidth",attrs:{type:"datetime",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.taskForm.startDate,callback:function(e){t.$set(t.taskForm,"startDate",e)},expression:"taskForm.startDate"}}),a("div",{staticStyle:{width:"5px",margin:"0px 10px"}},[t._v("-")]),a("el-date-picker",{staticClass:"inputWidth",attrs:{type:"datetime",placeholder:"选择日期",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.taskForm.endDate,callback:function(e){t.$set(t.taskForm,"endDate",e)},expression:"taskForm.endDate"}})],1)]),a("el-form-item",{attrs:{"label-width":"1px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.selectList()}}},[t._v(t._s(t.$t("common.btnFind")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.resetList()}}},[t._v(t._s(t.$t("common.btnReset")))]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.showDialogVisible()}}},[t._v(t._s(t.$t("devopstools.createTask")))])],1)],1)],1),a("div",{staticClass:"line"}),a("div",{staticClass:"tabledata"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,stripe:"","element-loading-text":"Loading","max-height":t.tableHeight,"header-cell-style":{background:"#E5E9EF",color:"#606266"},border:""}},[a("el-table-column",{attrs:{type:"index",align:"center",index:t.indexMethod,label:t.$t("devopstools.num"),width:"60"}}),a("el-table-column",{attrs:{align:"center",label:t.$t("devopstools.taskName"),"min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.taskName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:t.$t("devopstools.toolName"),"min-width":"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.devopsName)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:t.$t("devopstools.createName"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.createUser)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:t.$t("devopstools.createTime"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.createTime)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:t.$t("common.operat"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.goDetail(e.row.id)}}},[t._v(" "+t._s(t.$t("devopstools.view"))+" ")]),a("el-button",{staticStyle:{"margin-left":"10px",color:"#F00"},attrs:{type:"text",size:"mini"},on:{click:function(a){return t.deleteDate(e.row.id)}}},[t._v(" "+t._s(t.$t("common.delete"))+" ")])]}}])})],1)],1),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.taskForm.pageNum,"page-sizes":[10,20,30,40],"page-size":t.taskForm.pageSize,layout:"total, sizes, prev, pager, next",total:t.listSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:t.dialogVisible,title:t.$t("devopstools.createTask"),width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"25%"}},[a("el-form-item",{attrs:{label:t.$t("devopstools.taskName")}},[a("el-input",{staticStyle:{width:"80%"},attrs:{size:"mini"},model:{value:t.creatFrom.taskName,callback:function(e){t.$set(t.creatFrom,"taskName",e)},expression:"creatFrom.taskName"}})],1),a("el-form-item",{attrs:{label:t.$t("devopstools.toolName")}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",size:"mini",placeholder:"请选择"},model:{value:t.creatFrom.devopsId,callback:function(e){t.$set(t.creatFrom,"devopsId",e)},expression:"creatFrom.devopsId"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("common.btnConfirm")))]),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("common.btnCancel")))])],1)],1)],1)],1)},i=[],o=a("1da1"),s=(a("96cf"),a("d3b7"),a("a6fe")),r={data:function(){return{listLoading:!0,list:[],listSize:0,tableHeight:0,taskForm:{templateName:"",pageNum:1,pageSize:20,startDate:"",endDate:""},creatFrom:{taskName:"",devopsId:""},dialogVisible:!1,options:[]}},created:function(){var t=this,e=document.documentElement.clientHeight-200+"px";this.$nextTick((function(){t.tableHeight=e}))},mounted:function(){this.selectList();var t=this;window.onresize=function(){return function(){var e=document.documentElement.clientHeight-200+"px";t.tableHeight=e}()}},methods:{indexMethod:function(t){return(~~this.taskForm.pageNum-1)*this.taskForm.pageSize+t+1},loadAll:function(){var t=this;Object(s["f"])().then((function(e){e.data&&0===e.code&&(t.options=e.data)}))},selectList:function(){var t=this;this.listLoading=!0,Object(s["i"])(this.taskForm).then((function(e){e.data&&0===e.code&&(t.list=e.data.records,t.listSize=e.data.total)})).finally((function(){t.listLoading=!1}))},create:function(){var t=this;this.$confirm(this.$t("devopstools.createConfirm"),this.$t("common.prompt"),{confirmButtonText:this.$t("common.btnConfirm"),cancelButtonText:this.$t("common.btnCancel"),cancelButtonClass:"bhh-btn-custom-cancel"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.listLoading=!0,Object(s["a"])(t.creatFrom).then((function(e){0===e.code&&(t.taskForm.pageNum=1,t.taskForm.pageSize=20,t.selectList(),t.$message({type:"success",message:t.$t("devopstools.createSuccess"),duration:1e3}))})).finally((function(){t.listLoading=!1,t.dialogVisible=!1}));case 2:case"end":return e.stop()}}),e)}))))},deleteDate:function(t){var e=this;this.$confirm(this.$t("common.delConfirm"),this.$t("common.prompt"),{confirmButtonText:this.$t("common.btnConfirm"),cancelButtonText:this.$t("common.btnCancel"),cancelButtonClass:"bhh-btn-custom-cancel"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.listLoading=!0,Object(s["b"])(t).then((function(t){e.taskForm.pageNum=1,e.taskForm.pageSize=20,e.selectList(),0===t.code&&e.$message({type:"success",message:e.$t("common.deleteSuccess"),duration:1e3})})).finally((function(){e.listLoading=!1}));case 2:case"end":return a.stop()}}),a)}))))},handleSizeChange:function(t){this.taskForm.pageSize=t,this.selectList()},handleCurrentChange:function(t){this.taskForm.pageNum=t,this.selectList()},resetList:function(){this.taskForm.templateName="",this.taskForm.startDate="",this.taskForm.endDate="",this.taskForm.pageNum=1,this.taskForm.pageSize=20,this.selectList()},showDialogVisible:function(){this.creatFrom.taskName="",this.creatFrom.devopsId="",this.dialogVisible=!0,this.loadAll()},goDetail:function(t){this.$router.push({name:"detail",params:{taskId:t}})}}},l=r,c=(a("cf46"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"7e1afbd2",null);e["default"]=u.exports}}]);